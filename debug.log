DEBUG 2025-05-14 12:55:06,143 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 12:55:06,143 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
ERROR 2025-05-14 12:55:06,239 log Internal Server Error: /api/products/215e0ade-8c87-4502-86b9-2d8ba773828f/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 70, in patch
    logger.debug(f"Serializer: {serializer}")
                               ^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 548, in __repr__
    return representation.serializer_repr(self, indent=1)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/utils/representation.py", line 88, in serializer_repr
    ret += field_repr(field)
           ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/utils/representation.py", line 56, in field_repr
    '%s=%s' % (key, smart_repr(val))
                    ^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/utils/representation.py", line 33, in smart_repr
    value = repr(value)
            ^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 374, in __repr__
    data = list(self[: REPR_OUTPUT_SIZE + 1])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 398, in __iter__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
DEBUG 2025-05-14 12:57:48,327 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 12:57:48,329 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 12:57:48,329 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
DEBUG 2025-05-14 12:57:48,330 views Serializer is valid: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
ERROR 2025-05-14 12:57:48,405 log Internal Server Error: /api/products/215e0ade-8c87-4502-86b9-2d8ba773828f/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/fields.py", line 437, in get_attribute
    return get_attribute(instance, self.source_attrs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/fields.py", line 104, in get_attribute
    instance = getattr(instance, attr)
               ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'arabic_name'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 75, in patch
    return Response(serializer.data)
                    ^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 527, in to_representation
    attribute = field.get_attribute(instance)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/fields.py", line 470, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `arabic_name` on serializer `ProductSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `coroutine` instance.
Original exception text was: 'coroutine' object has no attribute 'arabic_name'.
DEBUG 2025-05-14 12:58:59,174 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 12:58:59,175 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 12:58:59,175 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
DEBUG 2025-05-14 12:58:59,176 views Serializer is valid: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 12:59:43,046 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 12:59:43,048 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 12:59:43,049 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
ERROR 2025-05-14 12:59:43,110 log Internal Server Error: /api/products/215e0ade-8c87-4502-86b9-2d8ba773828f/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 73, in patch
    logger.debug(f"Serializer is valid: {serializer.__dict__}")
                                        ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/utils/serializer_helpers.py", line 182, in __repr__
    return dict.__repr__(self.fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/fields.py", line 654, in __repr__
    return representation.field_repr(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/utils/representation.py", line 56, in field_repr
    '%s=%s' % (key, smart_repr(val))
                    ^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/utils/representation.py", line 33, in smart_repr
    value = repr(value)
            ^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 374, in __repr__
    data = list(self[: REPR_OUTPUT_SIZE + 1])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 398, in __iter__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
DEBUG 2025-05-14 13:00:21,327 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 13:00:21,327 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 13:00:21,328 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
DEBUG 2025-05-14 13:00:21,330 views Serializer is valid: {'id': '215e0ade-8c87-4502-86b9-2d8ba773828f', 'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids', 'brand_in_arabic': 'الحد ألأقصى', 'brand_in_english': 'Maximum Limit', 'name_translit': '', 'nutrition_facts': {'Fats': 78.6, 'Calories': 5.67}, 'category': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': 'f077bf68-941f-4e6f-b160-f764d1ad1a09', 'arabic_name': 'مثال', 'english_name': 'example', 'created_at': '2025-05-14T09:20:45.352964Z', 'updated_at': '2025-05-14T09:20:45.352978Z'}, {'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-14T09:23:34.569086Z', 'updated_at': '2025-05-14T12:34:07.469782Z'}
ERROR 2025-05-14 13:00:21,374 log Internal Server Error: /api/products/215e0ade-8c87-4502-86b9-2d8ba773828f/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 74, in patch
    await sync_to_async(serializer.save)()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 196, in save
    assert not hasattr(self, '_data'), (
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: You cannot call `.save()` after accessing `serializer.data`.If you need to access data before committing to the database then inspect 'serializer.validated_data' instead. 
DEBUG 2025-05-14 13:01:42,764 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 13:01:42,768 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 13:01:42,769 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
ERROR 2025-05-14 13:01:42,864 log Internal Server Error: /api/products/215e0ade-8c87-4502-86b9-2d8ba773828f/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/fields.py", line 437, in get_attribute
    return get_attribute(instance, self.source_attrs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/fields.py", line 104, in get_attribute
    instance = getattr(instance, attr)
               ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'arabic_name'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 74, in patch
    logger.debug(f"Serializer is valid: {serializer.data}")
                                         ^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 527, in to_representation
    attribute = field.get_attribute(instance)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/fields.py", line 470, in get_attribute
    raise type(exc)(msg)
AttributeError: Got AttributeError when attempting to get a value for field `arabic_name` on serializer `ProductSerializer`.
The serializer field might be named incorrectly and not match any attribute or key on the `coroutine` instance.
Original exception text was: 'coroutine' object has no attribute 'arabic_name'.
DEBUG 2025-05-14 13:10:16,574 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 13:10:16,574 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 13:10:16,575 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
DEBUG 2025-05-14 13:11:24,205 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 13:11:24,206 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 13:11:24,206 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
DEBUG 2025-05-14 13:13:13,162 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 13:13:13,164 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 13:13:13,164 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
DEBUG 2025-05-14 13:16:11,002 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 13:16:11,003 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 13:16:11,003 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
DEBUG 2025-05-14 13:16:57,370 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 13:16:57,370 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 13:16:57,370 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
DEBUG 2025-05-14 13:16:58,581 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 13:16:58,581 views Request data: {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 13:16:58,582 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض امينيه', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 32, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
DEBUG 2025-05-14 13:17:16,998 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 13:17:16,998 views Request data: {'arabic_name': 'احماض ', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 13:17:16,998 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض ', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض ', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 48, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
DEBUG 2025-05-14 13:18:17,792 views Processing update for product 215e0ade-8c87-4502-86b9-2d8ba773828f
DEBUG 2025-05-14 13:18:17,792 views Request data: {'arabic_name': 'احماض ', 'english_name': 'Amino Acids'}
DEBUG 2025-05-14 13:18:17,792 views Serializer: {'_args': (<Product: Amino Acids / احماض امينيه>,), '_kwargs': {'data': {'arabic_name': 'احماض ', 'english_name': 'Amino Acids'}, 'partial': True}, 'instance': <Product: Amino Acids / احماض امينيه>, 'initial_data': {'arabic_name': 'احماض ', 'english_name': 'Amino Acids'}, 'partial': True, '_context': {}, '_creation_counter': 16, 'read_only': False, 'write_only': False, 'required': True, 'default': <class 'rest_framework.fields.empty'>, 'source': None, 'initial': None, 'label': None, 'help_text': None, 'style': {}, 'allow_null': False, 'field_name': None, 'parent': None, 'error_messages': {'required': 'This field is required.', 'null': 'This field may not be null.', 'invalid': 'Invalid data. Expected a dictionary, but got {datatype}.'}}
WARNING 2025-05-16 09:19:08,271 log Not Found: /
WARNING 2025-05-16 09:19:08,493 log Not Found: /favicon.ico
ERROR 2025-05-16 09:20:38,971 log Internal Server Error: /api/products/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 37, in post
    if serializer.is_valid():
       ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 225, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 444, in run_validation
    value = self.to_internal_value(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 501, in to_internal_value
    validated_value = field.run_validation(primitive_value)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/relations.py", line 155, in run_validation
    return super().run_validation(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/fields.py", line 538, in run_validation
    value = self.to_internal_value(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/relations.py", line 259, in to_internal_value
    return queryset.get(pk=data)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 633, in get
    num = len(clone)
          ^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 380, in __len__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
ERROR 2025-05-16 09:27:40,126 log Internal Server Error: /api/products/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 37, in post
    if serializer.is_valid():
       ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 225, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 444, in run_validation
    value = self.to_internal_value(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 501, in to_internal_value
    validated_value = field.run_validation(primitive_value)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/relations.py", line 155, in run_validation
    return super().run_validation(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/fields.py", line 538, in run_validation
    value = self.to_internal_value(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/relations.py", line 259, in to_internal_value
    return queryset.get(pk=data)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 633, in get
    num = len(clone)
          ^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 380, in __len__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
DEBUG 2025-05-16 09:28:50,654 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
ERROR 2025-05-16 09:28:50,727 log Internal Server Error: /api/products/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 38, in post
    if serializer.is_valid():
       ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 225, in is_valid
    self._validated_data = self.run_validation(self.initial_data)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 444, in run_validation
    value = self.to_internal_value(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 501, in to_internal_value
    validated_value = field.run_validation(primitive_value)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/relations.py", line 155, in run_validation
    return super().run_validation(data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/fields.py", line 538, in run_validation
    value = self.to_internal_value(data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/relations.py", line 259, in to_internal_value
    return queryset.get(pk=data)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 633, in get
    num = len(clone)
          ^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 380, in __len__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
DEBUG 2025-05-16 09:30:14,380 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
DEBUG 2025-05-16 09:30:14,423 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
DEBUG 2025-05-16 09:30:14,423 models Saving product: Product / منتج
DEBUG 2025-05-16 09:30:14,478 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
ERROR 2025-05-16 09:30:14,538 log Internal Server Error: /api/products/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 42, in post
    return Response(serializer.data, status=status.HTTP_201_CREATED)
                    ^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 715, in to_representation
    return [
           ^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 398, in __iter__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
DEBUG 2025-05-16 09:31:45,408 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
DEBUG 2025-05-16 09:31:45,440 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
DEBUG 2025-05-16 09:31:45,442 models Saving product: Product / منتج
DEBUG 2025-05-16 09:31:45,459 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
ERROR 2025-05-16 09:31:45,517 log Internal Server Error: /api/products/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 42, in post
    return Response(await sync_to_async(serializer.data), status=status.HTTP_201_CREATED)
                                        ^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 715, in to_representation
    return [
           ^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 398, in __iter__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
DEBUG 2025-05-16 09:39:01,410 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
DEBUG 2025-05-16 09:39:01,447 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
DEBUG 2025-05-16 09:39:01,448 models Saving product: Product / منتج
DEBUG 2025-05-16 09:39:01,464 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
ERROR 2025-05-16 09:39:01,513 log Internal Server Error: /api/products/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 42, in post
    return Response(serializer.data, status=status.HTTP_201_CREATED)
                    ^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 573, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 540, in to_representation
    ret[field.field_name] = field.to_representation(attribute)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 715, in to_representation
    return [
           ^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 398, in __iter__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
DEBUG 2025-05-16 09:42:31,840 views Creating product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
DEBUG 2025-05-16 09:42:31,893 models Saving product: Product / منتج
DEBUG 2025-05-16 09:42:31,942 views Created product with data: {'arabic_name': 'منتج', 'english_name': 'Product', 'brand_in_arabic': 'ماركة', 'brand_in_english': 'Brand', 'nutrition_facts': {'calories': 200, 'fat': '10g', 'protein': '5g'}, 'category_id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'keyword_ids': ['5c291ecf-a374-4acc-a4a4-58e77f5e6740']}
ERROR 2025-05-16 09:50:45,293 log Internal Server Error: /api/keywords/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 181, in post
    serialized_data = await sync_to_async(serializer.data)()
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 609, in sync_to_async
    return SyncToAsync(
           ^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 399, in __init__
    raise TypeError("sync_to_async can only be applied to sync functions.")
TypeError: sync_to_async can only be applied to sync functions.
WARNING 2025-05-16 11:09:31,910 log Not Found: /
WARNING 2025-05-16 11:09:32,168 log Not Found: /favicon.ico
ERROR 2025-05-16 11:09:57,776 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 128, in post
    async with transaction.atomic():
TypeError: 'Atomic' object does not support the asynchronous context manager protocol
ERROR 2025-05-16 11:17:56,097 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 128, in post
    async with sync_to_async(transaction.atomic)():
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
ERROR 2025-05-16 12:28:11,762 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 110, in post
    data = await self.perform_in_transaction(save_category)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 19, in perform_in_transaction
    return await sync_to_async(self._execute_transaction)(func, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 23, in _execute_transaction
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 107, in save_category
    serializer.save()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 658, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/m7mod/working_space/mahmoud/code_quest/products/models.py", line 150, in save
    self.__class__.objects.select_for_update().get(pk=self.pk)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 637, in get
    raise self.model.DoesNotExist(
products.models.Category.DoesNotExist: Category matching query does not exist.
ERROR 2025-05-16 12:51:47,386 log Internal Server Error: /api/keywords/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 167, in post
    data = await self.perform_in_transaction(save_keyword)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 19, in perform_in_transaction
    return await sync_to_async(self._execute_transaction)(func, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 23, in _execute_transaction
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 164, in save_keyword
    serializer.save()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 658, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/m7mod/working_space/mahmoud/code_quest/products/models.py", line 112, in save
    self.__class__.objects.select_for_update().get(pk=self.pk)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 637, in get
    raise self.model.DoesNotExist(
products.models.Keyword.DoesNotExist: Keyword matching query does not exist.
ERROR 2025-05-16 12:52:27,127 log Internal Server Error: /api/keywords/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views.py", line 193, in post
    async with transaction.atomic():
TypeError: 'Atomic' object does not support the asynchronous context manager protocol
WARNING 2025-05-17 11:25:15,364 log Not Found: /
WARNING 2025-05-17 11:25:16,095 log Not Found: /favicon.ico
ERROR 2025-05-17 11:25:31,550 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/categroy.py", line 18, in get
    data = await category_service.get_all()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/services/category.py", line 13, in get_all
    return serializer.data
           ^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 797, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 715, in to_representation
    return [
           ^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 398, in __iter__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
ERROR 2025-05-17 11:37:36,636 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 284, in _get_response_async
    response = await sync_to_async(
               ^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/template/response.py", line 111, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/renderers.py", line 100, in render
    ret = json.dumps(
          ^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/utils/json.py", line 25, in dumps
    return json.dumps(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/utils/encoders.py", line 67, in default
    return super().default(obj)
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Category is not JSON serializable
ERROR 2025-05-17 11:40:23,386 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/categroy.py", line 22, in get
    logger.debug(f"Fetched {len(data)} categories")
                            ^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 380, in __len__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
ERROR 2025-05-17 11:41:42,575 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/categroy.py", line 22, in get
    logger.debug(f"Categories: {data}")
                               ^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 374, in __repr__
    data = list(self[: REPR_OUTPUT_SIZE + 1])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 398, in __iter__
    self._fetch_all()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1881, in _fetch_all
    self._result_cache = list(self._iterable_class(self))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 91, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1558, in execute_sql
    cursor = self.connection.cursor()
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/asyncio.py", line 24, in inner
    raise SynchronousOnlyOperation(message)
django.core.exceptions.SynchronousOnlyOperation: You cannot call this from an async context - use a thread or sync_to_async.
ERROR 2025-05-17 12:02:43,606 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 284, in _get_response_async
    response = await sync_to_async(
               ^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/template/response.py", line 111, in render
    self.content = self.rendered_content
                   ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/response.py", line 74, in rendered_content
    ret = renderer.render(self.data, accepted_media_type, context)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/renderers.py", line 100, in render
    ret = json.dumps(
          ^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/utils/json.py", line 25, in dumps
    return json.dumps(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/utils/encoders.py", line 67, in default
    return super().default(obj)
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Category is not JSON serializable
DEBUG 2025-05-17 12:04:05,547 category Fetched 1 categories
DEBUG 2025-05-17 12:04:05,548 category Categories Serializer: CategorySerializer(<QuerySet [<Category: test / اختبار>]>, many=True):
    id = UUIDField(read_only=True)
    arabic_name = CharField(max_length=100, required=True)
    english_name = CharField(max_length=100, required=True)
    name_translit = CharField(read_only=True)
    arabic_translit = CharField(help_text='English to Arabic transliteration', read_only=True)
    created_at = DateTimeField(read_only=True)
    updated_at = DateTimeField(read_only=True)
    version = IntegerField(read_only=True)
DEBUG 2025-05-17 12:04:05,548 category Categories: [{'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z', 'version': 1}]
ERROR 2025-05-17 12:05:57,927 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/categroy.py", line 31, in post
    data = await sync_to_async(category_repositories.create)(request.data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/repositories/category.py", line 26, in create
    serializer.save()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 658, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/m7mod/working_space/mahmoud/code_quest/products/models.py", line 150, in save
    self.__class__.objects.select_for_update().get(pk=self.pk)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 637, in get
    raise self.model.DoesNotExist(
products.models.Category.DoesNotExist: Category matching query does not exist.
DEBUG 2025-05-17 12:08:00,823 category Serializer data: CategorySerializer(data={'arabic_name': 'string', 'english_name': 'string'}):
    id = UUIDField(read_only=True)
    arabic_name = CharField(max_length=100, required=True)
    english_name = CharField(max_length=100, required=True)
    name_translit = CharField(read_only=True)
    arabic_translit = CharField(help_text='English to Arabic transliteration', read_only=True)
    created_at = DateTimeField(read_only=True)
    updated_at = DateTimeField(read_only=True)
    version = IntegerField(read_only=True)
DEBUG 2025-05-17 12:08:00,841 category Creating category with data: {'arabic_name': 'string', 'english_name': 'string'}
DEBUG 2025-05-17 12:08:00,842 category Serializer data: {'arabic_name': 'string', 'english_name': 'string'}
ERROR 2025-05-17 12:08:00,860 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/categroy.py", line 31, in post
    data = await sync_to_async(category_repositories.create)(request.data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/repositories/category.py", line 29, in create
    serializer.save()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 196, in save
    assert not hasattr(self, '_data'), (
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: You cannot call `.save()` after accessing `serializer.data`.If you need to access data before committing to the database then inspect 'serializer.validated_data' instead. 
DEBUG 2025-05-17 12:08:50,232 category Serializer Pre data: CategorySerializer(data={'arabic_name': 'string', 'english_name': 'string'}):
    id = UUIDField(read_only=True)
    arabic_name = CharField(max_length=100, required=True)
    english_name = CharField(max_length=100, required=True)
    name_translit = CharField(read_only=True)
    arabic_translit = CharField(help_text='English to Arabic transliteration', read_only=True)
    created_at = DateTimeField(read_only=True)
    updated_at = DateTimeField(read_only=True)
    version = IntegerField(read_only=True)
DEBUG 2025-05-17 12:08:50,252 category Creating category with data: {'arabic_name': 'string', 'english_name': 'string'}
DEBUG 2025-05-17 12:08:50,253 category Serializer data: {'arabic_name': 'string', 'english_name': 'string'}
ERROR 2025-05-17 12:08:50,273 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/categroy.py", line 31, in post
    data = await sync_to_async(category_repositories.create)(request.data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/repositories/category.py", line 29, in create
    serializer.save()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 196, in save
    assert not hasattr(self, '_data'), (
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: You cannot call `.save()` after accessing `serializer.data`.If you need to access data before committing to the database then inspect 'serializer.validated_data' instead. 
DEBUG 2025-05-17 12:09:07,698 category Serializer Pre data: CategorySerializer(data={'arabic_name': 'string', 'english_name': 'string'}):
    id = UUIDField(read_only=True)
    arabic_name = CharField(max_length=100, required=True)
    english_name = CharField(max_length=100, required=True)
    name_translit = CharField(read_only=True)
    arabic_translit = CharField(help_text='English to Arabic transliteration', read_only=True)
    created_at = DateTimeField(read_only=True)
    updated_at = DateTimeField(read_only=True)
    version = IntegerField(read_only=True)
DEBUG 2025-05-17 12:09:07,716 category Creating category with data: {'arabic_name': 'string', 'english_name': 'string'}
ERROR 2025-05-17 12:09:07,760 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/categroy.py", line 31, in post
    data = await sync_to_async(category_repositories.create)(request.data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/repositories/category.py", line 28, in create
    serializer.save()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 658, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/m7mod/working_space/mahmoud/code_quest/products/models.py", line 150, in save
    self.__class__.objects.select_for_update().get(pk=self.pk)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 637, in get
    raise self.model.DoesNotExist(
products.models.Category.DoesNotExist: Category matching query does not exist.
DEBUG 2025-05-17 12:13:56,666 category Serializer Pre data: CategorySerializer(data={'arabic_name': 'string', 'english_name': 'string'}):
    id = UUIDField(read_only=True)
    arabic_name = CharField(max_length=100, required=True)
    english_name = CharField(max_length=100, required=True)
    name_translit = CharField(read_only=True)
    arabic_translit = CharField(help_text='English to Arabic transliteration', read_only=True)
    created_at = DateTimeField(read_only=True)
    updated_at = DateTimeField(read_only=True)
    version = IntegerField(read_only=True)
ERROR 2025-05-17 12:13:56,736 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/categroy.py", line 31, in post
    data = await sync_to_async(category_repositories.create)(request.data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/repositories/category.py", line 27, in create
    category = Category.objects.create(**data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 658, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/m7mod/working_space/mahmoud/code_quest/products/models.py", line 150, in save
    self.__class__.objects.select_for_update().get(pk=self.pk)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 637, in get
    raise self.model.DoesNotExist(
products.models.Category.DoesNotExist: Category matching query does not exist.
DEBUG 2025-05-17 12:22:30,399 category Serializer Pre data: CategorySerializer(data={'arabic_name': 'string', 'english_name': 'string'}):
    id = UUIDField(read_only=True)
    arabic_name = CharField(max_length=100, required=True)
    english_name = CharField(max_length=100, required=True)
    name_translit = CharField(read_only=True)
    arabic_translit = CharField(help_text='English to Arabic transliteration', read_only=True)
    created_at = DateTimeField(read_only=True)
    updated_at = DateTimeField(read_only=True)
    version = IntegerField(read_only=True)
DEBUG 2025-05-17 12:22:30,421 category Creating category with data: {'arabic_name': 'string', 'english_name': 'string'}
DEBUG 2025-05-17 12:22:30,421 category Serializer data: {'arabic_name': 'string', 'english_name': 'string'}
ERROR 2025-05-17 12:22:30,438 log Internal Server Error: /api/categories/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/categroy.py", line 31, in post
    data = await sync_to_async(category_repositories.create)(request.data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/repositories/category.py", line 29, in create
    serializer.save()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 196, in save
    assert not hasattr(self, '_data'), (
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: You cannot call `.save()` after accessing `serializer.data`.If you need to access data before committing to the database then inspect 'serializer.validated_data' instead. 
DEBUG 2025-05-17 12:22:48,437 category Serializer Pre data: CategorySerializer(data={'arabic_name': 'string', 'english_name': 'string'}):
    id = UUIDField(read_only=True)
    arabic_name = CharField(max_length=100, required=True)
    english_name = CharField(max_length=100, required=True)
    name_translit = CharField(read_only=True)
    arabic_translit = CharField(help_text='English to Arabic transliteration', read_only=True)
    created_at = DateTimeField(read_only=True)
    updated_at = DateTimeField(read_only=True)
    version = IntegerField(read_only=True)
DEBUG 2025-05-17 12:22:48,455 category Creating category with data: {'arabic_name': 'string', 'english_name': 'string'}
WARNING 2025-05-17 12:22:48,459 models Category with pk=37ac0487-e49b-455d-b70d-64271ce16003 does not exist during update. Treating as new object.
DEBUG 2025-05-17 12:22:48,489 category Serializer : CategorySerializer(data={'arabic_name': 'string', 'english_name': 'string'}):
    id = UUIDField(read_only=True)
    arabic_name = CharField(max_length=100, required=True)
    english_name = CharField(max_length=100, required=True)
    name_translit = CharField(read_only=True)
    arabic_translit = CharField(help_text='English to Arabic transliteration', read_only=True)
    created_at = DateTimeField(read_only=True)
    updated_at = DateTimeField(read_only=True)
    version = IntegerField(read_only=True)
DEBUG 2025-05-17 12:25:09,271 category Serializer Pre data: CategorySerializer(data={'arabic_name': 'جديد', 'english_name': 'new'}):
    id = UUIDField(read_only=True)
    arabic_name = CharField(max_length=100, required=True)
    english_name = CharField(max_length=100, required=True)
    name_translit = CharField(read_only=True)
    arabic_translit = CharField(help_text='English to Arabic transliteration', read_only=True)
    created_at = DateTimeField(read_only=True)
    updated_at = DateTimeField(read_only=True)
    version = IntegerField(read_only=True)
WARNING 2025-05-17 12:25:09,297 models Category with pk=0d525b90-8a49-47e1-ab79-81d9bec0beb4 does not exist during update. Treating as new object.
WARNING 2025-05-17 13:06:33,825 models Category with pk=ef2ef488-d6b8-4489-8460-96c5fc95bc88 does not exist during update. Treating as new object.
ERROR 2025-05-17 13:16:18,706 log Internal Server Error: /api/schema/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/views.py", line 84, in get
    return self._get_schema_response(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/views.py", line 92, in _get_schema_response
    data=generator.get_schema(request=request, public=self.serve_public),
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/generators.py", line 285, in get_schema
    paths=self.parse(request, public),
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/generators.py", line 256, in parse
    operation = view.schema.get_operation(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/utils.py", line 451, in get_operation
    return super().get_operation(path, path_regex, path_prefix, method, registry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/utils.py", line 451, in get_operation
    return super().get_operation(path, path_regex, path_prefix, method, registry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 112, in get_operation
    operation['responses'] = self._get_response_bodies()
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1406, in _get_response_bodies
    content_response = self._get_response_for_code(serializer, code, media_types, direction)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1449, in _get_response_for_code
    schema = self._unwrap_list_serializer(serializer.child, direction)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1426, in _unwrap_list_serializer
    component = self.resolve_serializer(serializer, direction)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1648, in resolve_serializer
    component.schema = self._map_serializer(serializer, direction, bypass_extensions)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 949, in _map_serializer
    schema = self._map_basic_serializer(serializer, direction)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1042, in _map_basic_serializer
    for field in serializer.fields.values():
                 ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/functional.py", line 57, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1177, in get_field_names
    assert field_name in fields, (
           ^^^^^^^^^^^^^^^^^^^^
AssertionError: The field 'category' was declared on serializer ProductSerializer, but has not been included in the 'fields' option.
ERROR 2025-05-17 13:16:18,914 log Internal Server Error: /api/schema/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/views.py", line 84, in get
    return self._get_schema_response(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/views.py", line 92, in _get_schema_response
    data=generator.get_schema(request=request, public=self.serve_public),
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/generators.py", line 285, in get_schema
    paths=self.parse(request, public),
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/generators.py", line 256, in parse
    operation = view.schema.get_operation(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/utils.py", line 451, in get_operation
    return super().get_operation(path, path_regex, path_prefix, method, registry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/utils.py", line 451, in get_operation
    return super().get_operation(path, path_regex, path_prefix, method, registry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 112, in get_operation
    operation['responses'] = self._get_response_bodies()
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1406, in _get_response_bodies
    content_response = self._get_response_for_code(serializer, code, media_types, direction)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1449, in _get_response_for_code
    schema = self._unwrap_list_serializer(serializer.child, direction)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1426, in _unwrap_list_serializer
    component = self.resolve_serializer(serializer, direction)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1648, in resolve_serializer
    component.schema = self._map_serializer(serializer, direction, bypass_extensions)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 949, in _map_serializer
    schema = self._map_basic_serializer(serializer, direction)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1042, in _map_basic_serializer
    for field in serializer.fields.values():
                 ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/functional.py", line 57, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1177, in get_field_names
    assert field_name in fields, (
           ^^^^^^^^^^^^^^^^^^^^
AssertionError: The field 'category' was declared on serializer ProductSerializer, but has not been included in the 'fields' option.
ERROR 2025-05-17 13:19:57,244 log Internal Server Error: /api/products/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/product.py", line 18, in get
    data = await sync_to_async(product_repository.get_all)()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/repositories/product.py", line 14, in get_all
    data = serializer.data
           ^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 797, in data
    ret = super().data
          ^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 251, in data
    self._data = self.to_representation(self.instance)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 716, in to_representation
    self.child.to_representation(item) for item in iterable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 525, in to_representation
    for field in fields:
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 386, in _readable_fields
    for field in self.fields.values():
                 ^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/functional.py", line 57, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1081, in get_fields
    field_names = self.get_field_names(declared_fields, info)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1177, in get_field_names
    assert field_name in fields, (
           ^^^^^^^^^^^^^^^^^^^^
AssertionError: The field 'version' was declared on serializer ProductSerializer, but has not been included in the 'fields' option.
ERROR 2025-05-17 13:22:18,947 log Internal Server Error: /api/products/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/psycopg/cursor.py", line 97, in execute
    raise ex.with_traceback(None)
psycopg.errors.NotNullViolation: null value in column "brand_in_arabic" of relation "products_product" violates not-null constraint
DETAIL:  Failing row contains (6be59793-00b9-4fa2-99d4-b0dcc6cc69d7, منتج, Product, null, null, {"fat": "10g", "protein": "5g", "calories": 200}, mntj, 2025-05-17 13:22:18.891035+00, 2025-05-17 13:22:18.891048+00, ed2ae78d-f73b-4242-abf4-6f68ed3429ba, برودوكت, 1).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/product.py", line 28, in post
    data = await sync_to_async(product_repository.create)(request.data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/repositories/product.py", line 24, in create
    serializer.save()
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 210, in save
    self.instance = self.create(validated_data)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 991, in create
    instance = ModelClass._default_manager.create(**validated_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 658, in create
    obj.save(force_insert=True, using=self.db)
  File "/home/m7mod/working_space/mahmoud/code_quest/products/models.py", line 196, in save
    super().save(*args, **kwargs)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/base.py", line 814, in save
    self.save_base(
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/base.py", line 877, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/base.py", line 1020, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/base.py", line 1061, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1805, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/compiler.py", line 1820, in execute_sql
    cursor.execute(sql, params)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 102, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 67, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 80, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 84, in _execute
    with self.db.wrap_database_errors:
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/psycopg/cursor.py", line 97, in execute
    raise ex.with_traceback(None)
django.db.utils.IntegrityError: null value in column "brand_in_arabic" of relation "products_product" violates not-null constraint
DETAIL:  Failing row contains (6be59793-00b9-4fa2-99d4-b0dcc6cc69d7, منتج, Product, null, null, {"fat": "10g", "protein": "5g", "calories": 200}, mntj, 2025-05-17 13:22:18.891035+00, 2025-05-17 13:22:18.891048+00, ed2ae78d-f73b-4242-abf4-6f68ed3429ba, برودوكت, 1).
WARNING 2025-05-17 13:33:08,140 log Not Found: /static/admin/css/base.css
WARNING 2025-05-17 13:33:08,246 log Not Found: /static/admin/css/dark_mode.css
WARNING 2025-05-17 13:33:08,248 log Not Found: /static/admin/css/nav_sidebar.css
WARNING 2025-05-17 13:33:08,282 log Not Found: /static/admin/css/login.css
WARNING 2025-05-17 13:33:08,282 log Not Found: /static/admin/js/theme.js
WARNING 2025-05-17 13:33:08,284 log Not Found: /static/admin/css/responsive.css
WARNING 2025-05-17 13:33:08,288 log Not Found: /static/admin/js/nav_sidebar.js
WARNING 2025-05-17 13:33:23,970 log Not Found: /static/admin/css/base.css
WARNING 2025-05-17 13:33:23,973 log Not Found: /static/admin/css/dashboard.css
WARNING 2025-05-17 13:33:24,008 log Not Found: /static/admin/css/dark_mode.css
WARNING 2025-05-17 13:33:24,019 log Not Found: /static/admin/js/theme.js
WARNING 2025-05-17 13:33:24,022 log Not Found: /static/admin/css/responsive.css
WARNING 2025-05-17 13:33:24,023 log Not Found: /static/admin/css/nav_sidebar.css
WARNING 2025-05-17 13:33:24,040 log Not Found: /static/admin/js/nav_sidebar.js
INFO 2025-05-17 13:33:42,432 autoreload Watching for file changes with StatReloader
WARNING 2025-05-17 15:49:20,563 log Not Found: /
WARNING 2025-05-17 15:49:20,817 log Not Found: /favicon.ico
WARNING 2025-05-17 15:52:08,147 log Not Found: /api/search/
INFO 2025-05-17 15:53:07,222 search Received search query: منتج
INFO 2025-05-17 15:53:07,222 search Split query into words: ['منتج']
WARNING 2025-05-17 15:53:07,264 log Not Found: /api/search/
INFO 2025-05-17 15:53:37,880 search Received search query: product
INFO 2025-05-17 15:53:37,880 search Split query into words: ['product']
WARNING 2025-05-17 15:53:37,887 log Not Found: /api/search/
INFO 2025-05-17 15:54:00,732 search Received search query: product منتج
INFO 2025-05-17 15:54:00,732 search Split query into words: ['product', 'منتج']
WARNING 2025-05-17 15:54:00,737 log Not Found: /api/search/
INFO 2025-05-17 15:55:23,077 search Received search query: product منتج
INFO 2025-05-17 15:55:23,077 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 15:55:23,123 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 15:55:23,123 search Arabic pattern match: None
DEBUG 2025-05-17 15:55:23,125 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 15:55:23,125 search Arabic pattern match: <re.Match object; span=(0, 1), match='م'>
WARNING 2025-05-17 15:55:23,129 log Not Found: /api/search/
INFO 2025-05-17 15:56:01,576 search Received search query: product منتج
INFO 2025-05-17 15:56:01,576 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 15:56:01,616 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 15:56:01,617 search Arabic pattern match: False
DEBUG 2025-05-17 15:56:01,618 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 15:56:01,618 search Arabic pattern match: True
WARNING 2025-05-17 15:56:01,621 log Not Found: /api/search/
INFO 2025-05-17 15:57:09,928 search Received search query: product منتج
INFO 2025-05-17 15:57:09,928 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 15:57:09,968 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 15:57:09,968 search Arabic pattern match: False
DEBUG 2025-05-17 15:57:09,970 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 15:57:09,970 search Arabic pattern match: True
WARNING 2025-05-17 15:57:09,973 log Not Found: /api/search/
INFO 2025-05-17 15:57:31,305 search Received search query: product منتج
INFO 2025-05-17 15:57:31,305 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 15:57:31,345 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 15:57:31,345 search Arabic pattern match: False
DEBUG 2025-05-17 15:57:31,348 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 15:57:31,348 search Arabic pattern match: True
WARNING 2025-05-17 15:57:31,351 log Not Found: /api/search/
INFO 2025-05-17 15:58:23,536 search Received search query: product منتج
INFO 2025-05-17 15:58:23,536 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 15:58:23,574 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 15:58:23,574 search Arabic pattern match: False
DEBUG 2025-05-17 15:58:23,578 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 15:58:23,578 search Arabic pattern match: True
WARNING 2025-05-17 15:58:23,583 log Not Found: /api/search/
INFO 2025-05-17 15:58:50,340 search Received search query: product منتج
INFO 2025-05-17 15:58:50,340 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 15:58:50,389 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 15:58:50,389 search Arabic pattern match: False
DEBUG 2025-05-17 15:58:50,389 search Search results for word 'product': (AND: ('english_name', 'product'))
DEBUG 2025-05-17 15:58:50,393 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 15:58:50,393 search Arabic pattern match: True
DEBUG 2025-05-17 15:58:50,393 search Search results for word 'منتج': (AND: ('arabic_name', 'منتج'))
WARNING 2025-05-17 15:58:50,398 log Not Found: /api/search/
INFO 2025-05-17 16:00:11,521 search Received search query: product منتج
INFO 2025-05-17 16:00:11,522 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 16:00:11,584 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 16:00:11,584 search Arabic pattern match: False
DEBUG 2025-05-17 16:00:11,585 search Word 'product' is Arabic: False
DEBUG 2025-05-17 16:00:11,585 search Search results for word 'product': (AND: ('english_name', 'product'))
DEBUG 2025-05-17 16:00:11,598 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 16:00:11,598 search Arabic pattern match: True
DEBUG 2025-05-17 16:00:11,598 search Word 'منتج' is Arabic: True
DEBUG 2025-05-17 16:00:11,598 search Search results for word 'منتج': (AND: ('arabic_name', 'منتج'))
WARNING 2025-05-17 16:00:11,604 log Not Found: /api/search/
INFO 2025-05-17 16:03:08,633 search Received search query: product منتج
INFO 2025-05-17 16:03:08,633 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 16:03:08,670 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 16:03:08,671 search Arabic pattern match: False
DEBUG 2025-05-17 16:03:08,671 search Word 'product' is Arabic: False
DEBUG 2025-05-17 16:03:08,671 search Search results for word 'product': (AND: ('english_name', 'product'))
DEBUG 2025-05-17 16:03:08,674 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 16:03:08,674 search Arabic pattern match: True
DEBUG 2025-05-17 16:03:08,674 search Word 'منتج' is Arabic: True
DEBUG 2025-05-17 16:03:08,674 search Search results for word 'منتج': (AND: ('arabic_name', 'منتج'))
WARNING 2025-05-17 16:03:08,679 log Not Found: /api/search/
INFO 2025-05-17 16:03:49,636 search Received search query: product منتج
INFO 2025-05-17 16:03:49,636 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 16:03:49,714 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 16:03:49,714 search Arabic pattern match: False
DEBUG 2025-05-17 16:03:49,715 search Word 'product' is Arabic: False
DEBUG 2025-05-17 16:03:49,715 search Search results for word 'product': (AND: ('english_name', 'product'))
DEBUG 2025-05-17 16:03:49,718 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 16:03:49,719 search Arabic pattern match: True
DEBUG 2025-05-17 16:03:49,719 search Word 'منتج' is Arabic: True
DEBUG 2025-05-17 16:03:49,719 search Search results for word 'منتج': (AND: ('arabic_name', 'منتج'))
WARNING 2025-05-17 16:03:49,725 log Not Found: /api/search/
INFO 2025-05-17 16:04:46,514 search Received search query: product منتج
INFO 2025-05-17 16:04:46,515 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 16:04:46,554 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 16:04:46,554 search Arabic pattern match: False
DEBUG 2025-05-17 16:04:46,554 search Word 'product' is Arabic: False
DEBUG 2025-05-17 16:04:46,554 search Search results for word 'product': (AND: ('english_name', 'product'))
DEBUG 2025-05-17 16:04:46,555 search Search results for word 'product': <coroutine object SyncToAsync.__call__ at 0x7fdfdfeec1c0>
DEBUG 2025-05-17 16:04:46,556 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 16:04:46,556 search Arabic pattern match: True
DEBUG 2025-05-17 16:04:46,556 search Word 'منتج' is Arabic: True
DEBUG 2025-05-17 16:04:46,556 search Search results for word 'منتج': (AND: ('arabic_name', 'منتج'))
DEBUG 2025-05-17 16:04:46,557 search Search results for word 'منتج': <coroutine object SyncToAsync.__call__ at 0x7fdfdfeefac0>
WARNING 2025-05-17 16:04:46,560 log Not Found: /api/search/
INFO 2025-05-17 16:07:21,556 search Received search query: product منتج
INFO 2025-05-17 16:07:21,556 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 16:07:21,592 search Checking if the word 'product' is Arabic.
DEBUG 2025-05-17 16:07:21,593 search Arabic pattern match: False
DEBUG 2025-05-17 16:07:21,593 search Word 'product' is Arabic: False
DEBUG 2025-05-17 16:07:21,593 search Search results for word 'product': (AND: ('english_name', 'product'))
DEBUG 2025-05-17 16:07:21,620 search Search results for word 'product': <QuerySet []>
DEBUG 2025-05-17 16:07:21,624 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 16:07:21,624 search Arabic pattern match: True
DEBUG 2025-05-17 16:07:21,624 search Word 'منتج' is Arabic: True
DEBUG 2025-05-17 16:07:21,625 search Search results for word 'منتج': (AND: ('arabic_name', 'منتج'))
DEBUG 2025-05-17 16:07:21,628 search Search results for word 'منتج': <QuerySet [<Product: Product / منتج>, <Product: Product / منتج>, <Product: Product / منتج>, <Product: Product / منتج>]>
ERROR 2025-05-17 16:07:21,673 log Internal Server Error: /api/search/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/search.py", line 65, in get
    combined_results = await sync_to_async(search_service.search_products)(results_per_word)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/services/search.py", line 59, in search_products
    logger.debug(f"Results: {result}")  # Check if results is a valid list
                             ^^^^^^
UnboundLocalError: cannot access local variable 'result' where it is not associated with a value
INFO 2025-05-17 16:08:06,150 search Received search query: product منتج
INFO 2025-05-17 16:08:06,150 search Split query into words: ['product', 'منتج']
DEBUG 2025-05-17 16:08:06,190 search Results: {'id': 'a12dd0b3-db41-44a2-aae5-ef0592116872', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'رودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:30:14.424281Z', 'updated_at': '2025-05-16T09:30:14.424294Z'}
DEBUG 2025-05-17 16:08:06,190 search Results: {'id': '469f9888-296c-4793-bedc-3e5065bdd016', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'رودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:31:45.442626Z', 'updated_at': '2025-05-16T09:31:45.442651Z'}
DEBUG 2025-05-17 16:08:06,191 search Results: {'id': 'aa40a72e-2fd8-40f5-9cfd-723e1a9a322b', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'برودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:39:01.448419Z', 'updated_at': '2025-05-16T09:39:01.448431Z'}
DEBUG 2025-05-17 16:08:06,191 search Results: {'id': '051fa740-5d82-42c8-948b-586917f4d31f', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'برودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:42:31.893909Z', 'updated_at': '2025-05-16T09:42:31.893921Z'}
INFO 2025-05-17 16:08:17,412 search Received search query: product
INFO 2025-05-17 16:08:17,412 search Split query into words: ['product']
WARNING 2025-05-17 16:08:17,416 log Not Found: /api/search/
INFO 2025-05-17 16:08:33,777 search Received search query: منتج
INFO 2025-05-17 16:08:33,777 search Split query into words: ['منتج']
DEBUG 2025-05-17 16:08:33,779 search Results: {'id': 'a12dd0b3-db41-44a2-aae5-ef0592116872', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'رودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:30:14.424281Z', 'updated_at': '2025-05-16T09:30:14.424294Z'}
DEBUG 2025-05-17 16:08:33,779 search Results: {'id': '469f9888-296c-4793-bedc-3e5065bdd016', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'رودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:31:45.442626Z', 'updated_at': '2025-05-16T09:31:45.442651Z'}
DEBUG 2025-05-17 16:08:33,779 search Results: {'id': 'aa40a72e-2fd8-40f5-9cfd-723e1a9a322b', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'برودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:39:01.448419Z', 'updated_at': '2025-05-16T09:39:01.448431Z'}
DEBUG 2025-05-17 16:08:33,779 search Results: {'id': '051fa740-5d82-42c8-948b-586917f4d31f', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'برودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:42:31.893909Z', 'updated_at': '2025-05-16T09:42:31.893921Z'}
INFO 2025-05-17 16:09:21,127 search Received search query: product
INFO 2025-05-17 16:09:21,127 search Split query into words: ['product']
WARNING 2025-05-17 16:09:21,131 log Not Found: /api/search/
INFO 2025-05-17 16:09:28,562 search Received search query: Product
INFO 2025-05-17 16:09:28,562 search Split query into words: ['Product']
WARNING 2025-05-17 16:09:28,567 log Not Found: /api/search/
INFO 2025-05-17 16:12:16,856 search Received search query: Product
INFO 2025-05-17 16:12:16,856 search Split query into words: ['Product']
DEBUG 2025-05-17 16:12:16,893 search Cache key: search:product
WARNING 2025-05-17 16:12:16,897 log Not Found: /api/search/
INFO 2025-05-17 16:12:35,785 search Received search query: Product
INFO 2025-05-17 16:12:35,785 search Split query into words: ['Product']
DEBUG 2025-05-17 16:12:35,823 search Cache key: search:product
DEBUG 2025-05-17 16:12:35,823 search Cache hit for word 'Product': []
WARNING 2025-05-17 16:12:35,826 log Not Found: /api/search/
INFO 2025-05-17 16:13:00,964 search Received search query: Produc
INFO 2025-05-17 16:13:00,965 search Split query into words: ['Produc']
DEBUG 2025-05-17 16:13:00,966 search Cache key: search:produc
DEBUG 2025-05-17 16:13:00,966 search Checking if the word 'Produc' is Arabic.
DEBUG 2025-05-17 16:13:00,966 search Arabic pattern match: False
DEBUG 2025-05-17 16:13:00,966 search Word 'Produc' is Arabic: False
DEBUG 2025-05-17 16:13:00,966 search Search results for word 'Produc': (AND: ('english_name', 'Produc'))
DEBUG 2025-05-17 16:13:00,969 search Search results for word 'Produc': <QuerySet []>
WARNING 2025-05-17 16:13:00,974 log Not Found: /api/search/
INFO 2025-05-17 16:13:09,617 search Received search query: Produc
INFO 2025-05-17 16:13:09,617 search Split query into words: ['Produc']
DEBUG 2025-05-17 16:13:09,618 search Cache key: search:produc
DEBUG 2025-05-17 16:13:09,619 search Cache hit for word 'Produc': []
WARNING 2025-05-17 16:13:09,621 log Not Found: /api/search/
INFO 2025-05-17 16:15:43,894 search Received search query: real
INFO 2025-05-17 16:15:43,894 search Split query into words: ['real']
DEBUG 2025-05-17 16:15:43,935 search Cache key: search:real
DEBUG 2025-05-17 16:15:43,936 search Checking if the word 'real' is Arabic.
DEBUG 2025-05-17 16:15:43,936 search Arabic pattern match: False
DEBUG 2025-05-17 16:15:43,936 search Word 'real' is Arabic: False
DEBUG 2025-05-17 16:15:43,936 search Search results for word 'real': (OR: ('english_name', 'real'), ('name_translit', 'real'))
DEBUG 2025-05-17 16:15:43,940 search Search results for word 'real': <QuerySet []>
WARNING 2025-05-17 16:15:43,948 log Not Found: /api/search/
INFO 2025-05-17 16:16:12,503 search Received search query: حقيقي
INFO 2025-05-17 16:16:12,503 search Split query into words: ['حقيقي']
DEBUG 2025-05-17 16:16:12,505 search Cache key: search:حقيقي
DEBUG 2025-05-17 16:16:12,505 search Checking if the word 'حقيقي' is Arabic.
DEBUG 2025-05-17 16:16:12,505 search Arabic pattern match: True
DEBUG 2025-05-17 16:16:12,505 search Word 'حقيقي' is Arabic: True
DEBUG 2025-05-17 16:16:12,505 search Search results for word 'حقيقي': (OR: ('arabic_name', 'حقيقي'), ('arabic_translit', 'حقيقي'))
DEBUG 2025-05-17 16:16:12,510 search Search results for word 'حقيقي': <QuerySet []>
WARNING 2025-05-17 16:16:12,515 log Not Found: /api/search/
INFO 2025-05-17 16:17:09,941 search Received search query: اختبار
INFO 2025-05-17 16:17:09,941 search Split query into words: ['اختبار']
DEBUG 2025-05-17 16:17:09,981 search Cache key: search:اختبار
DEBUG 2025-05-17 16:17:09,981 search Checking if the word 'اختبار' is Arabic.
DEBUG 2025-05-17 16:17:09,981 search Arabic pattern match: True
DEBUG 2025-05-17 16:17:09,981 search Word 'اختبار' is Arabic: True
DEBUG 2025-05-17 16:17:09,981 search Search results for word 'اختبار': (AND: ('arabic_name', 'اختبار'))
DEBUG 2025-05-17 16:17:09,984 search Search results for word 'اختبار': <QuerySet []>
WARNING 2025-05-17 16:17:09,988 log Not Found: /api/search/
WARNING 2025-05-17 17:24:46,456 log Not Found: /
INFO 2025-05-17 17:25:39,698 search Received search query: حقيقي
INFO 2025-05-17 17:25:39,699 search Split query into words: ['حقيقي']
DEBUG 2025-05-17 17:25:39,733 search Checking if the word 'حقيقي' is Arabic.
DEBUG 2025-05-17 17:25:39,733 search Arabic pattern match: True
INFO 2025-05-17 17:25:39,733 search Word 'حقيقي' is Arabic: True
INFO 2025-05-17 17:25:39,764 search Cached 5 results for word 'حقيقي' page 1
DEBUG 2025-05-17 17:25:39,765 search Results: {'id': '469f9888-296c-4793-bedc-3e5065bdd016', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'رودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:31:45.442626Z', 'updated_at': '2025-05-16T09:31:45.442651Z'}
DEBUG 2025-05-17 17:25:39,765 search Results: {'id': 'aa40a72e-2fd8-40f5-9cfd-723e1a9a322b', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'برودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:39:01.448419Z', 'updated_at': '2025-05-16T09:39:01.448431Z'}
DEBUG 2025-05-17 17:25:39,765 search Results: {'id': 'a12dd0b3-db41-44a2-aae5-ef0592116872', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'رودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:30:14.424281Z', 'updated_at': '2025-05-16T09:30:14.424294Z'}
DEBUG 2025-05-17 17:25:39,765 search Results: {'id': '215e0ade-8c87-4502-86b9-2d8ba773828f', 'arabic_name': 'احماض', 'english_name': 'Amino Acids', 'name_translit': 'ahmad', 'arabic_translit': '', 'nutrition_facts': {'Fats': 78.6, 'Calories': 5.67}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': 'f077bf68-941f-4e6f-b160-f764d1ad1a09', 'arabic_name': 'مثال', 'english_name': 'example', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T09:20:45.352964Z', 'updated_at': '2025-05-14T09:20:45.352978Z'}, {'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-14T09:23:34.569086Z', 'updated_at': '2025-05-14T13:19:07.161214Z'}
DEBUG 2025-05-17 17:25:39,765 search Results: {'id': '051fa740-5d82-42c8-948b-586917f4d31f', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'برودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:42:31.893909Z', 'updated_at': '2025-05-16T09:42:31.893921Z'}
INFO 2025-05-17 17:26:00,400 search Received search query: منتج
INFO 2025-05-17 17:26:00,400 search Split query into words: ['منتج']
DEBUG 2025-05-17 17:26:00,401 search Checking if the word 'منتج' is Arabic.
DEBUG 2025-05-17 17:26:00,401 search Arabic pattern match: True
INFO 2025-05-17 17:26:00,401 search Word 'منتج' is Arabic: True
INFO 2025-05-17 17:26:00,422 search Cached 4 results for word 'منتج' page 1
DEBUG 2025-05-17 17:26:00,422 search Results: {'id': '469f9888-296c-4793-bedc-3e5065bdd016', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'رودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:31:45.442626Z', 'updated_at': '2025-05-16T09:31:45.442651Z'}
DEBUG 2025-05-17 17:26:00,423 search Results: {'id': 'aa40a72e-2fd8-40f5-9cfd-723e1a9a322b', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'برودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:39:01.448419Z', 'updated_at': '2025-05-16T09:39:01.448431Z'}
DEBUG 2025-05-17 17:26:00,423 search Results: {'id': 'a12dd0b3-db41-44a2-aae5-ef0592116872', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'رودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:30:14.424281Z', 'updated_at': '2025-05-16T09:30:14.424294Z'}
DEBUG 2025-05-17 17:26:00,423 search Results: {'id': '051fa740-5d82-42c8-948b-586917f4d31f', 'arabic_name': 'منتج', 'english_name': 'Product', 'name_translit': 'mntj', 'arabic_translit': 'برودوكت', 'nutrition_facts': {'fat': '10g', 'protein': '5g', 'calories': 200}, 'brand': {'id': 'ed2ae78d-f73b-4242-abf4-6f68ed3429ba', 'arabic_name': 'اختبار', 'english_name': 'test', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:28:25.348647Z', 'updated_at': '2025-05-14T07:28:25.348662Z'}, 'keywords': [{'id': '5c291ecf-a374-4acc-a4a4-58e77f5e6740', 'arabic_name': 'حقيقي', 'english_name': 'real', 'name_translit': '', 'arabic_translit': '', 'created_at': '2025-05-14T07:38:51.511949Z', 'updated_at': '2025-05-14T07:38:51.511963Z'}], 'created_at': '2025-05-16T09:42:31.893909Z', 'updated_at': '2025-05-16T09:42:31.893921Z'}
INFO 2025-05-17 17:27:55,205 search Received search query: test
INFO 2025-05-17 17:27:55,205 search Split query into words: ['test']
INFO 2025-05-17 17:49:34,585 search Received search query: دهون
INFO 2025-05-17 17:49:34,586 search Split query into words: ['دهون']
WARNING 2025-05-17 17:49:34,623 log Not Found: /api/search/
INFO 2025-05-17 17:49:40,835 search Received search query: fats
INFO 2025-05-17 17:49:40,835 search Split query into words: ['fats']
WARNING 2025-05-17 17:49:40,839 log Not Found: /api/search/
INFO 2025-05-17 17:49:42,266 search Received search query: fats
INFO 2025-05-17 17:49:42,266 search Split query into words: ['fats']
WARNING 2025-05-17 17:49:42,271 log Not Found: /api/search/
INFO 2025-05-17 17:49:48,282 search Received search query: test
INFO 2025-05-17 17:49:48,282 search Split query into words: ['test']
INFO 2025-05-17 17:49:56,383 search Received search query: fat
INFO 2025-05-17 17:49:56,384 search Split query into words: ['fat']
WARNING 2025-05-17 17:49:56,388 log Not Found: /api/search/
INFO 2025-05-17 17:50:04,263 search Received search query: protien
INFO 2025-05-17 17:50:04,264 search Split query into words: ['protien']
WARNING 2025-05-17 17:50:04,268 log Not Found: /api/search/
INFO 2025-05-17 17:52:15,318 search Received search query: test
INFO 2025-05-17 17:52:15,318 search Split query into words: ['test']
INFO 2025-05-17 17:52:23,485 search Received search query: calories
INFO 2025-05-17 17:52:23,485 search Split query into words: ['calories']
WARNING 2025-05-17 17:52:23,493 log Not Found: /api/search/
ERROR 2025-05-17 17:52:41,908 log Internal Server Error: /api/schema/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/views.py", line 84, in get
    return self._get_schema_response(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/views.py", line 92, in _get_schema_response
    data=generator.get_schema(request=request, public=self.serve_public),
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/generators.py", line 285, in get_schema
    paths=self.parse(request, public),
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/generators.py", line 256, in parse
    operation = view.schema.get_operation(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/utils.py", line 451, in get_operation
    return super().get_operation(path, path_regex, path_prefix, method, registry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/utils.py", line 451, in get_operation
    return super().get_operation(path, path_regex, path_prefix, method, registry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 112, in get_operation
    operation['responses'] = self._get_response_bodies()
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1406, in _get_response_bodies
    content_response = self._get_response_for_code(serializer, code, media_types, direction)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1449, in _get_response_for_code
    schema = self._unwrap_list_serializer(serializer.child, direction)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1426, in _unwrap_list_serializer
    component = self.resolve_serializer(serializer, direction)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1648, in resolve_serializer
    component.schema = self._map_serializer(serializer, direction, bypass_extensions)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 949, in _map_serializer
    schema = self._map_basic_serializer(serializer, direction)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1042, in _map_basic_serializer
    for field in serializer.fields.values():
                 ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/functional.py", line 57, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1105, in get_fields
    field_class, field_kwargs = self.build_field(
                                ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1251, in build_field
    return self.build_unknown_field(field_name, model_class)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1369, in build_unknown_field
    raise ImproperlyConfigured(
django.core.exceptions.ImproperlyConfigured: Field name `nutrition_facts` is not valid for model `Product` in `products.serializers.ProductSerializer`.
ERROR 2025-05-17 17:52:42,523 log Internal Server Error: /api/schema/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/views/decorators/csrf.py", line 56, in wrapper_view
    return view_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/views/generic/base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/views.py", line 84, in get
    return self._get_schema_response(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/views.py", line 92, in _get_schema_response
    data=generator.get_schema(request=request, public=self.serve_public),
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/generators.py", line 285, in get_schema
    paths=self.parse(request, public),
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/generators.py", line 256, in parse
    operation = view.schema.get_operation(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/utils.py", line 451, in get_operation
    return super().get_operation(path, path_regex, path_prefix, method, registry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/utils.py", line 451, in get_operation
    return super().get_operation(path, path_regex, path_prefix, method, registry)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 112, in get_operation
    operation['responses'] = self._get_response_bodies()
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1406, in _get_response_bodies
    content_response = self._get_response_for_code(serializer, code, media_types, direction)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1449, in _get_response_for_code
    schema = self._unwrap_list_serializer(serializer.child, direction)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1426, in _unwrap_list_serializer
    component = self.resolve_serializer(serializer, direction)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1648, in resolve_serializer
    component.schema = self._map_serializer(serializer, direction, bypass_extensions)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 949, in _map_serializer
    schema = self._map_basic_serializer(serializer, direction)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/drf_spectacular/openapi.py", line 1042, in _map_basic_serializer
    for field in serializer.fields.values():
                 ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/utils/functional.py", line 57, in __get__
    res = instance.__dict__[self.name] = self.func(instance)
                                         ^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 374, in fields
    for key, value in self.get_fields().items():
                      ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1105, in get_fields
    field_class, field_kwargs = self.build_field(
                                ^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1251, in build_field
    return self.build_unknown_field(field_name, model_class)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/serializers.py", line 1369, in build_unknown_field
    raise ImproperlyConfigured(
django.core.exceptions.ImproperlyConfigured: Field name `nutrition_facts` is not valid for model `Product` in `products.serializers.ProductSerializer`.
INFO 2025-05-17 17:53:45,165 search Received search query: protein
INFO 2025-05-17 17:53:45,166 search Split query into words: ['protein']
WARNING 2025-05-17 20:34:22,894 log Not Found: /
ERROR 2025-05-17 20:34:59,459 log Internal Server Error: /api/search/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/search.py", line 80, in get
    combined_results = await sync_to_async(search_service.search_products_by_word)(words, page, page_size, similarity_threshold)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/services/search.py", line 21, in search_products_by_word
    results = product_search(words, page, page_size, similarity_threshold)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/repositories/product.py", line 135, in search_products_by_word
    products = products.filter(combined_filter).distinct()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1436, in filter
    return self._filter_or_exclude(False, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1454, in _filter_or_exclude
    clone._filter_or_exclude_inplace(negate, args, kwargs)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/query.py", line 1461, in _filter_or_exclude_inplace
    self._query.add_q(Q(*args, **kwargs))
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1498, in add_q
    clause, _ = self._add_q(q_object, self.used_aliases)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1529, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1357, in build_filter
    return self._add_q(
           ^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1529, in _add_q
    child_clause, needed_inner = self.build_filter(
                                 ^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1379, in build_filter
    lookups, parts, reffed_expression = self.solve_lookup_type(arg, summarize)
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1189, in solve_lookup_type
    _, field, _, lookup_parts = self.names_to_path(lookup_splitted, self.get_meta())
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/db/models/sql/query.py", line 1677, in names_to_path
    raise FieldError(
django.core.exceptions.FieldError: Cannot resolve keyword 'name_sim' into field. Choices are: arabic_name, arabic_translit, brand, brand_id, created_at, english_name, id, keywords, name_translit, nutrition_facts, total_sim, updated_at, version
WARNING 2025-05-17 20:45:34,511 log Not Found: /api/search/
ERROR 2025-05-17 21:25:52,072 log Internal Server Error: /api/products/
Traceback (most recent call last):
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/exception.py", line 42, in inner
    response = await get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 518, in thread_handler
    raise exc_info[1]
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/django/core/handlers/base.py", line 253, in _get_response_async
    response = await wrapped_callback(
               ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 73, in async_dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/adrf/views.py", line 68, in async_dispatch
    response = await handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/views/api/product.py", line 28, in post
    data = await sync_to_async(product_repository.create)(request.data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 468, in __call__
    ret = await asyncio.shield(exec_coro)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/venv/lib/python3.12/site-packages/asgiref/sync.py", line 522, in thread_handler
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/m7mod/working_space/mahmoud/code_quest/products/repositories/product.py", line 33, in create
    raise ValidationError(f"Invalid data {serializer.errors}")
django.core.exceptions.ValidationError: ["Invalid data {'brand_id': [ErrorDetail(string='“uuid-here” is not a valid UUID.', code='invalid')], 'keyword_ids': [ErrorDetail(string='“uuid-here” is not a valid UUID.', code='invalid')]}"]
